<!DOCTYPE html>

<html>
  <head>
    <title>Cart Counter Exercise</title>
    <link rel="stylesheet" href="styles/footer.css" type="text/css" />
    <link rel="stylesheet" href="styles/navbar.css" type="text/css" />
    <link rel="stylesheet" href="styles/styles.css" type="text/css" />
  </head>
  <body>
    <header class="navbar">
      <nav class="left-section">
        <img src="images/cart-counter-logo.svg" class="logo" />
        <span class="company-name">CRAMCART</span>
      </nav>
      <nav class="right-section">
        <span class="count-text">Cart Count:</span>
        <div class="icons">
          <span class="js-count-display count-display"></span>
          <span class="js-count-hidden count-hidden">
            <img src="images/lock.svg" class="lock-icon" />
          </span>
        </div>
      </nav>
    </header>

    <main class="counter">
      <h1>Cart Counter</h1>
      <p>(Limit of 10)</p>

      <div class="counter__grid-main">
        <button
          onclick="changeButton();"
          class="button primary-button js-total-button"
        >
          Click to Hide Total
        </button>

        <div class="counter__grid-buttons">
          <button
            onclick="updateCartQuantity(1, '+')"
            class="button secondary-button"
          >
            Add to Cart
          </button>
          <button
            onclick="updateCartQuantity(2, '+')"
            class="button secondary-button"
          >
            +2
          </button>
          <button
            onclick="updateCartQuantity(3, '+')"
            class="button secondary-button"
          >
            +3
          </button>

          <button
            class="button secondary-button"
            onclick="updateCartQuantity(4, '+')"
          >
            +4
          </button>

          <button
            class="button secondary-button"
            onclick="updateCartQuantity(5, '+')"
          >
            +5
          </button>

          <button
            onclick="updateCartQuantity(1, '-')"
            class="button secondary-button"
          >
            Remove from Cart
          </button>
          <button
            onclick="updateCartQuantity(2, '-')"
            class="button secondary-button"
          >
            -2
          </button>
          <button
            onclick="updateCartQuantity(3, '-')"
            class="button secondary-button"
          >
            -3
          </button>
          <button
            class="button secondary-button"
            onclick="updateCartQuantity(4, '-')"
          >
            -4
          </button>
          <button
            class="button secondary-button"
            onclick="updateCartQuantity(5, '-')"
          >
            -5
          </button>
        </div>

        <button
          onclick="
                  count = 0;
                  displayCount();
                  alert('Cart has been Reset!');
                "
          class="button primary-button"
        >
          Reset Cart
        </button>
      </div>
    </main>
    <footer class="footer">
      <span class="author-name">By Isha Viragi</span>

      <div class="socials-container">
        <a href="https://www.linkedin.com/in/ishaviragi/" target="_blank">
          <img
            src="images/linkedin-icon.svg"
            alt="LinkedIn logo"
            class="socials-icon"
          />
        </a>
        <a href="https://github.com/Isha-Viragi" target="_blank">
          <img
            src="images/github-icon.svg"
            alt="Github logo"
            class="socials-icon"
          />
        </a>
        <a href="mailto:isha.viragi@gmail.com" target="_blank">
          <img
            src="images/email-icon.svg"
            alt="Email icon"
            class="socials-icon"
          />
        </a>
      </div>
    </footer>
    <script>
      let count = 0;
      const cartLimit = 10;
      const cartFullMessage = "The cart is full!";
      const cartEmptyMessage = "Not enough items in the cart!!";

      displayCount();

      function updateCartQuantity(quantity, action) {
        if (action === "+") {
          if (count + quantity > cartLimit) alert(cartFullMessage);
          else {
            count += quantity;
            console.log(`Added ${quantity} to cart!`);
            displayCount();
          }
        } else if (action === "-") {
          if (count - quantity < 0) alert(cartEmptyMessage);
          else {
            count -= quantity;
            console.log(`Removed ${quantity} from cart!`);
            displayCount();
          }
        }
      }

      function displayCount() {
        const buttonElement = document.querySelector(".js-total-button");
        const displayElement = document.querySelector(".js-count-display");
        const hiddenElement = document.querySelector(".js-count-hidden");

        if (buttonElement.innerText === "Click to Show Total") {
          return;
        }
        displayElement.innerHTML = count;
        displayElement.classList.remove("count-display-off");
        hiddenElement.classList.add("count-hidden-off");
      }

      function hideCount() {
        const displayElement = document.querySelector(".js-count-display");
        const hiddenElement = document.querySelector(".js-count-hidden");

        displayElement.innerHTML = "";
        displayElement.classList.add("count-display-off");
        hiddenElement.classList.remove("count-hidden-off");
      }

      function changeButton() {
        const buttonElement = document.querySelector(".js-total-button");
        if (buttonElement.innerText === "Click to Hide Total") {
          buttonElement.innerHTML = "Click to Show Total";
          buttonElement.classList.add("button-toggle-off");
          hideCount();
        } else if (buttonElement.innerText === "Click to Show Total") {
          buttonElement.innerHTML = "Click to Hide Total";
          buttonElement.classList.remove("button-toggle-off");
          displayCount();
        }
      }
    </script>
  </body>
</html>
